<h1 class="text-3xl font-bold mb-2 text-center">Welcome to Car Rentals! Your one stop shop to renting cars!</h1>

<div class="m-6 p-4 border border-gray-300 rounded text-center">
  <form action="<%= search_cars_path %>" method="get">
    <input type="text" name="location" placeholder="Location" class="border border-gray-300 rounded p-2 mr-2">
    <input type="date" name="start_date" class="border border-gray-300 rounded p-2 mr-2">
    <input type="date" name="end_date" class="border border-gray-300 rounded p-2 mr-2">
    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Search</button>
  </form>
</div>

<div class="mx-6 mb-20">
  <div data-controller="map"
        data-map-api-key-value="<%= ENV["MAPBOX_API_KEY"] %>"
        data-map-markers-value="<%= @markers.to_json %>"
        class="h-64 w-full bg-gray-100 rounded border border-gray-300 overflow-hidden">
  </div>
</div>

<div class="mx-6 mt-8">
  <% if @cars.empty? %>
    <p class="text-center text-gray-600 text-xl p-8">No cars available for your search. Try different dates or location.</p>
  <% else %>
    <ul>
      <% @cars.each do |car| %>
      <li class="border border-gray-300 rounded p-4 mb-4">
        <p class="font-bold text-lg"><%= car.title %></p>
        <p class="text-gray-600"><%= car.brand %> - <%= car.year %></p>

        <% if car.photo.attached? %>
          <%= cl_image_tag car.photo.key, height: 100, width: 150, class: "h-10 w-16 object-cover rounded-md" %>
        <% else %>
          <div class="flex items-center justify-center h-10 w-16 rounded-md bg-gray-200">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
              <path d="M.97 3.97a.75.75 0 0 1 1.06 0l15 15a.75.75 0 1 1-1.06 1.06l-15-15a.75.75 0 0 1 0-1.06ZM17.25 16.06l2.69 2.69c.944.945 2.56.276 2.56-1.06V6.31c0-1.336-1.616-2.005-2.56-1.06l-2.69 2.69v8.12ZM15.75 7.5v8.068L4.682 4.5h8.068a3 3 0 0 1 3 3ZM1.5 16.5V7.682l11.773 11.773c-.17.03-.345.045-.523.045H4.5a3 3 0 0 1-3-3Z" />
          </svg>
          </div>
        <% end %>

        <%= link_to "View details to see availability", car_path(car),
        class: "inline-block text-blue-500 border border-blue-500 px-3 py-1 rounded hover:bg-blue-50 mt-2 text-sm" %>
      </li>
      <% end %>
    </ul>
  <% end %>
</div>

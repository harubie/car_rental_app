<div class="max-w-4xl mx-auto">
  <h1 class="text-2xl font-bold mb-6">My Bookings</h1>

  <% if @my_bookings.present? %>
    <% @my_bookings.each do |booking| %>
      <div class="bg-white p-4 rounded-lg shadow mb-4">
        <h3 class="font-semibold mb-2"><%= booking.car.model %></h3>
        <p class="text-gray-700">Start: <%= booking.start_date %></p>
        <p class="text-gray-700">End: <%= booking.end_date %></p>
        <p class="text-gray-700">Status: <%= booking.status %></p>
        <p class="text-gray-700">Total price: <%= number_to_currency(booking.total_price) %></p>

      <div class="mt-2 flex gap-2">
        <%= link_to "Edit Dates", edit_booking_path(booking),
            class: "bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600" %>
        <%= button_to "Delete", booking_path(booking), method: :delete,
            class: "bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600",
            data: { confirm: "Are you sure you want to delete this booking?" } %>
      </div>
      </div>
    <% end %>
  <% else %>
    <p class="text-gray-500">You haven't made any bookings yet.</p>
  <% end %>

  <hr class="my-6">

  <h2 class="text-xl font-semibold mb-4">Bookings for my cars</h2>
  <% if @incoming_bookings.present? %>
    <% @incoming_bookings.each do |booking| %>
      <div class="bg-blue-50 p-4 rounded-lg shadow mb-4">
        <h3 class="font-semibold mb-2"><%= booking.car.model %></h3>
        <p class="text-gray-700">Booked by: <%= booking.user.email %></p>
        <p class="text-gray-700">Start: <%= booking.start_date %></p>
        <p class="text-gray-700">End: <%= booking.end_date %></p>
        <p class="text-gray-700">Status: <%= booking.status %></p>
        <p class="text-gray-700">Total price: <%= number_to_currency(booking.total_price) %></p>
        <%= form_with model: booking, url: booking_path(booking), method: :patch, class: "mt-2 inline-block" do |f| %>
          <%= f.select :status, ['pending', 'accepted', 'declined', 'cancelled'], selected: booking.status, class: "border rounded p-1" %>
          <%= f.submit "Update", class: "bg-green-500 text-white px-2 py-1 rounded" %>
        <% end %>
      </div>
    <% end %>
  <% else %>
    <p class="text-gray-500">No one has booked your cars yet.</p>
  <% end %>
</div>
